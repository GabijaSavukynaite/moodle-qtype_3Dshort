{"version":3,"sources":["../src/model.js"],"names":["init","window","addEventListener","iframe","document","getElementById","innerDoc","contentDocument","contentWindow","container","scene","button","setAttribute","answers","traverse","child","name","material","color","set","push","id","position","x","toFixed","y","z","answersInput","createElement","type","value","JSON","stringify","appendChild","console","log"],"mappings":"gJA8BA,uD,OAEoB,QAAPA,CAAAA,IAAO,EAAc,CAChCC,MAAM,CAACC,gBAAP,CAAwB,MAAxB,CAAgC,UAAW,IACnCC,CAAAA,CAAM,CAAGC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAD0B,CAEnCC,CAAQ,CAAGH,CAAM,CAACI,eAAP,EAA0BJ,CAAM,CAACK,aAAP,CAAqBJ,QAFvB,CAGnCK,CAAS,CAAGH,CAAQ,CAACD,cAAT,CAAwB,gBAAxB,CAHuB,CAInCK,CAAK,CAAGD,CAAS,CAACC,KAJiB,CAMnCC,CAAM,CAAGP,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAN0B,CAOzCM,CAAM,CAACC,YAAP,CACE,OADF,CAEE,gQAFF,EAKAD,CAAM,CAACT,gBAAP,CAAwB,OAAxB,CAAiC,UAAM,CACrC,GAAMW,CAAAA,CAAO,CAAG,EAAhB,CACAH,CAAK,CAACI,QAAN,CAAe,SAAUC,CAAV,CAAiB,CAC9B,GAAmB,WAAf,GAAAA,CAAK,CAACC,IAAV,CAAgC,CAC9BD,CAAK,CAACE,QAAN,CAAeC,KAAf,CAAqBC,GAArB,CAAyB,MAAzB,EACAN,CAAO,CAACO,IAAR,CAAa,CACXC,EAAE,CAAEN,CAAK,CAACM,EADC,CAEXC,QAAQ,CAAE,CACRC,CAAC,CAAER,CAAK,CAACO,QAAN,CAAeC,CAAf,CAAiBC,OAAjB,CAAyB,CAAzB,CADK,CAERC,CAAC,CAAEV,CAAK,CAACO,QAAN,CAAeG,CAAf,CAAiBD,OAAjB,CAAyB,CAAzB,CAFK,CAGRE,CAAC,CAAEX,CAAK,CAACO,QAAN,CAAeI,CAAf,CAAiBF,OAAjB,CAAyB,CAAzB,CAHK,CAFC,CAAb,CAQD,CACF,CAZD,EAcA,GAAIG,CAAAA,CAAY,CAAGvB,QAAQ,CAACwB,aAAT,CAAuB,OAAvB,CAAnB,CACAD,CAAY,CAACE,IAAb,CAAoB,QAApB,CACAF,CAAY,CAACG,KAAb,CAAqBC,IAAI,CAACC,SAAL,CAAenB,CAAf,CAArB,CACAc,CAAY,CAACN,EAAb,CAAkB,UAAlB,CACAjB,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsC4B,WAAtC,CAAkDN,CAAlD,EACAO,OAAO,CAACC,GAAR,CAAY/B,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAZ,CACD,CAtBD,CAuBD,CAnCD,CAuED,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * model3d setup the ES6 javascript for the question type\n * https://docs.moodle.org/dev/Javascript_Modules#ES6_Modules_.28Moodle_v3.8_and_above.29\n *\n * @package    qtype\n * @subpackage model3d\n * @copyright  THEYEAR YOURNAME (YOURCONTACTINFO)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/**\n * Set up the plugin.\n *\n * @method init\n */\n\nimport Ajax from \"core/ajax\";\n\nexport const init = (canvasId) => {\n  window.addEventListener(\"load\", (event) => {\n    const iframe = document.getElementById(\"resourceobject\");\n    const innerDoc = iframe.contentDocument || iframe.contentWindow.document;\n    const container = innerDoc.getElementById(\"rendererCanvas\");\n    const scene = container.scene;\n\n    const button = document.getElementById(\"saveGrade\");\n    button.setAttribute(\n      \"style\",\n      \"display:inline-block; padding:0.3em 1.2em; margin:0 0.3em 0.3em 0;border-radius:2em;box-sizing: border-box;text-decoration:none;font-family:'Roboto',sans-serif;font-weight:300;color:#FFFFFF;background-color:#4eb5f1;text-align:center;transition: all 0.2s;\"\n    );\n\n    button.addEventListener(\"click\", () => {\n      const answers = [];\n      scene.traverse(function (child) {\n        if (child.name === \"draggable\") {\n          child.material.color.set(\"#fff\");\n          answers.push({\n            id: child.id,\n            position: {\n              x: child.position.x.toFixed(2),\n              y: child.position.y.toFixed(2),\n              z: child.position.z.toFixed(2),\n            },\n          });\n        }\n      });\n\n      var answersInput = document.createElement(\"input\");\n      answersInput.type = \"hidden\";\n      answersInput.value = JSON.stringify(answers);\n      answersInput.id = \"response\";\n      document.getElementById(\"3dquestion\").appendChild(answersInput);\n      console.log(document.getElementById(\"3dquestion\"));\n    });\n  });\n\n  // export const displayCorrectAnswers = (answers) => {};\n\n  //   var promises = Ajax.call(\n  //     [\n  //       {\n  //         methodname: \"qtype_model3d_get_grade\",\n  //         args: { edugameid: 1, score: 2 },\n  //       },\n  //     ],\n  //     true\n  //   );\n  //   promises[0]\n  //     .done(function (test) {\n  //       console.log(test);\n  //       console.log(\"success\");\n  //     })\n  //     .fail(function (response) {\n  //       console.log(response);\n  //     });\n  // });\n\n  // export const init = () => {\n  //     var promises = Ajax.call([{\n  //         methodname: 'qtype_model3d_get_grade',\n  //         args: { edugameid: 1, score: 2 },\n  //     }], true);\n  //     promises[0]\n  //         .done(function() {\n  //             console.log(\"success\")\n  //         })\n  //         .fail(function(response) {\n  //             console.log(\"fail\")\n  //         });\n  // }\n};\n"],"file":"model.min.js"}